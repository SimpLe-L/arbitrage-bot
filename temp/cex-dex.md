## 套利逻辑
1. 为什么存在机会
  当某单一市场的币的价格发生剧烈波动的时候，必然会出现套利空间。因为单一币种在整个市场的波动不可能同时触发，流动性是分散的。虽然最终价差会被机器人搬砖抹平，但任然存在机会

2. 可能的方案：同时接入主流交易所api以及链上聚合器，发现有利润就自动执行套利策略

## 价差
1. DEX 和 CEX 以及各个平台，现货存在价差，就可以进行搬砖套利
2. 三角套利也是利用价差，A -> B -> C -> A，三种币价之间存在价差，进行套利

## 资金费率套利
1. 负资金费率套利
  假如一个币的资金费率为负，可考虑套保做多，吃资金费。具体是借币卖出，换成usdt开同等仓位的多单，吃空方支付的资金费，等币价下跌再买币还回去
  --统一账户模式：借来卖掉现货的u和合约的盈亏都可充当保证金
  --各种手续费，借贷利率纳入考量

2. 正资金费率
  假如一个币的资金费率为正，可考虑套保做多，吃资金费。买入现货，开同等仓位的空单，吃资金费率

----跨所套利
  暂不纳入计划，要考虑的点较多

## 资源汇总
1. ccxt 支持各大交易所，也可以自己添加支持

2. 服务器：ovh netcup等，用于跑脚本监控

## tips
1. 熟练的买入现货和合约对冲
2. 熟悉各大cex的提币流程，以及关闭邮箱短信等提币验证。使用设备扫脸验证。（苹果叫设备通行证）
3. 熟悉各大dex交易所。第一时间去dexscreener查询这个代币在哪些dex交易所有流动性。
4. 如果涉及频繁的冲提操作 尽可能避免使用币安（会卡钱）
5. 交易需要提高gas和滑点。
6. 严格遵守 一买 一卖原则。相同时间 相同数量。合约空单不动。
7. 熟悉各种桥，因为极端情况下 cex会暂停冲提，这个时候要用到桥了。
8. 高费率的币怎么借：程序检测合约和现货的差价，如果差价开始放大的时候就事有异常，提前借出来

## 开发计划
1. 优先实现价差模块，实时监控不同cex/dex之间的现货价格，有较大价差进行报警消息推送(此时可进行手动套利)
--采集数据，计算价差及手续费
--计算预期利润：预期利润 = （价格A - 价格B）x 交易量 - 手续费 - 转账费用

(1). 链上价格怎么拿到，第三方还是直接读取链上数据？
(2). 是两边都操作还是需要从一边搬往另一边
(3). 通过api进行挂单/提币，熟悉这个流程
(4). 占位

2. 实现资金费率监控，出现较高的资金费率时进行预警

3. 实现半自动化/自动化执行套利策略，优化交易金额/频率等参数

4. 进一步优化，提供web界面/更多交易对的监控/优化策略及参数

## 例子
1. 假设token A 在 dex/cex价格低，某个cex价格高
--A 在价高的 cex 可以借币，则可以直接在价格低的 dex/cex买入，在价格高的cex直接借币卖出，等充值到账在还币（出一点点利息）
--A 在价高的 cex 不支持借币，则可以直接在价格低的 dex/cex买入，同时在价高的地方开空同数量1倍合约，等充值到账同时清（若价差依然存在，可以持有空单头寸，继续搬，直到价差抹平再平仓）


2. 假设token A 在 cex 价格低，某个dex价格高
--cex买入现货，合约做空套保
--提币到dex卖掉，若有还有价差，继续重复以上步骤，空单不动
--若没有价差了，最后卖掉现货平仓合约空单





一、套利或者说价差空间如何出现？
毫无疑问就是价格的变化，价格变化的诱因其实就两种——事件驱动和数据驱动。 刚好有两个近期例子，前几天 $FDUSD 暴跌就是事件驱动型价格变化，Sun发文指控FDT这一具体事件或者消息导致FDUSD造抛售导致的下跌。 $OM 的暴跌就很明显属于数据驱动，暴跌但是短时间没有一个具体的消息面，纯粹是资金异动导致的。我们知道，快速反应是套利实现的重要因素，这里我们只讲思路。那么事情就简单了，对于事件驱动类去市面上找一些满足自己需求的即时总结Web3相关突发新闻的BOT。对于数据驱动类，会编程的自己写写（我自己还在学），不会编程的坐在电脑前面没事看看涨幅跌幅榜或者去找提供这类数据的工具。

二、需要提前做好什么准备？

1.首先需要熟悉各个Token的主链。
其实一共就3个类别：EVM系、IBC系和自有主网。EVM系是指Eth网络以及从Eth网络延伸的L2 ，包括但不限于OP、BSC、Base、Avax等等。IBC系是指Atom以及Atom延伸出的Mantra、IRIS、Osmo等等。自有主网是指像Sui、Sol、Near这种独立的主网。

2.在掌握1的基础上熟悉各种协议。

（1）找协议的功能性产品。
比如Defillama和Dexscreener和能帮你完整总结各个Chain以及On-chain协议，Coingecko和Coinmarketcap能够帮你总结和发现某个Token在链上是否具有流动性以及Token的涨跌幅，当然也有其他功能性产品可以自己去探索和发现。

（2）有流动性的各种DEX和聚合器
寻找你的目标Token在链上的流动性主要分布在哪些DEX协议上，没有TVL极大的影响滑点和差价空间，很好理解。像EVM系每个链都有自己核心的Swap，比如ETH网络上的Uniswap、BSC的Pancake、AVAX网络上的LFJ、Abs链上的AbstractSwap等等。当然，EVM系已经比较成熟，现在都可用单链或者跨链聚合器来完成链上的Swap，比如有大家熟知的1inch、Paraswap、Matchaxyz、Kyberswap等等。IBC系的流动性主要集中在Osmo这条IBC上，其他IBC也存在小众的Dex可自行探索。自有主网系的Sol上的Jup、Sui上的Cetus等等。上述的罗列只是提供思路，其他协议大家都可以自行寻找和探索。

（3）各种跨链桥和所需时间
这一点非常重要。你需要熟知市场上主流的跨链桥包括但不限于虫洞Wormhole、Axelar、deBridge等等。其实各个链也都会有他们自己官方认可的更具有针对性的跨链桥，这一点你也能从之前帖子内的OM的跨链上体会到。比如Poly网络的Pos桥针对的是从ETH跨链到Poly网络，OM自己专属的mantra桥，Sonic自己专属的官方桥等等。一些针对自己主链的桥通常可以在官方网站的生态系统中找到，但是尤其要注意跨链的时间和跨链后的资产正确性。有一些通过桥跨链到其他链的资产可能与目标链的资产不一致，例如你可以尝试走虫洞把OM跨链到BSC链上，你会发现完全是两个东西。还有一定就是跨进跨出的速度，这个需要牺牲一点手续费来作为尝试，其他的跨链桥就不在这里一一提及了。

三、出现价差空间如何操作？

1.借助工具
通常情况下，当CEX的Token发生暴跌时，链上的反应速度会慢一些，就是很简单从CEX提现到链上卖就行。为了锁定利润，你就必须要用到杠杆借贷或者合约套保这类工具。现在的大部分情况下CEX的杠杆借贷额度很快会被用完（很多人用BOT借贷），所以可以继续探索各个链上是否存在可用的借贷协议作为短期使用。

2.底仓思路
在实例当中，会碰到链上和CEX都不存在可借贷的Token怎么办呢？这里可以打开脑洞，运用粗暴的底仓思路。这里讲一个我碰到的例子，之前 $COW 刚上线时就是在两条不同的链上存在价差但是又没有能借贷或者套保的地方。于是我就自己把1K个Cow当做我购买的底层，提前放在价格大概率发生变化的目标链上，当两条链出现价差时，直接高价卖出底仓同时在价格低的一侧买入。这样做的好处就是大大节省了跨链的时间，无非就是多了一点底仓的风险敞口，如果最终的利润大于底仓的跌幅那就是OK的。不过这种思路仅限于能够持续一段时间或者长期出现价差的Token，有一定限制。

3.学习和模仿
我们都知道，模仿是快速达到目标的方式。如果你发现自己并不能像别人一样随时发现可套利的空间，那就去观察聪明钱是如何做的，这需要你能熟练运用链上的浏览器。在发现一些一直在搬砖套利的链上地址后可以用Debank或者Zerion来追踪聪明钱的具体操作方式。追踪聪明钱和发现聪明钱地址的操作方法需要大家在链上探索，这里不再过多赘述。除此之外，历史上存在很多次关于搬砖套利的大事件，很多优秀的选手也分享了他们对于这类事件的复盘，也可以在社媒上多去寻找。像不久前JellyJelly事件，$Luna 暴雷、$Boba 空投事件等等都可以作为典型案例来学习。

四、总结
由于现在链上的Bot横行，已经少了很多可搬砖或者套利空间，但是仍然存在一些冷门的例子。我始终觉得提高自己的策略能力是重中之重，像我置顶文章中Meteora LP策略在目前的市场环境中已经有点过时。个性化的策略都是在特定情况和短时间内的盈利手段，历史上的很多事件已无法刻舟求剑。所以，继续学习吧，共勉。还有很多内容可以聊， 今天先到这里。