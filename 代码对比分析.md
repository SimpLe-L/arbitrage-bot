# MEV机器人代码对比分析

## 当前实现(src/)的问题

### 1. 过度工程化
- **复杂的MEV引擎**: `MevEngine`有完整的状态管理、心跳机制、事件总线
- **过多抽象层**: EventBus、多种Collector、ExecutorManager等
- **复杂的启动流程**: main.rs有200多行初始化代码

### 2. 模块冗余
```
src/strategy/
├── amm/          # AMM相关
├── arb/          # 套利逻辑
├── bot/          # 机器人
├── config/       # 配置
├── contract/     # 合约
├── dex_sync/     # DEX同步
├── flashloan/    # 闪电贷
├── simulator/    # 模拟器
└── utils/        # 工具
```
太多子模块，职责重叠

### 3. 未完成功能
- 大量TODO注释
- 被注释掉的EventHandler代码
- 示例数据而非真实链上数据

## sui-mev的优势

### 1. 简洁架构
- **main.rs**: 仅30行，只是CLI入口
- **arb.rs**: 核心套利逻辑，专注问题本质
- **直接**: 没有过度抽象

### 2. 高效实现  
- **ObjectPool**: 高效管理模拟器实例
- **网格搜索 + 黄金分割**: 优化套利参数
- **异步并发**: 充分利用Rust的async能力

### 3. 清晰职责分离
```rust
// 简单而有效的架构
pub struct Arb {
    defi: Defi,  // 唯一核心依赖
}

// 核心方法专注套利逻辑
pub async fn find_opportunity(&self, ...) -> Result<ArbResult>
```

## 精简建议

### Phase 1: 移除冗余抽象
1. 删除复杂的MEV引擎
2. 简化启动逻辑
3. 合并重复模块

### Phase 2: 专注核心功能
1. 保留套利核心：路径查找、价格计算、交易执行
2. 移除非必要功能：统计、心跳、复杂状态管理
3. 使用更直接的数据收集方式

### Phase 3: 优化性能
1. 引入ObjectPool管理资源
2. 实现网格搜索优化
3. 改进异步并发处理

## 重构目标

将400+行复杂启动代码精简到30行以内，专注解决套利这一核心问题。
